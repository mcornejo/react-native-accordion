{"version":3,"names":["forwardRef","props","ref","useValidator","isArrow","DEFAULT_VISIBLE_CHEVRON","sizeIcon","DEFAULT_SIZE_TINT_CHEVRON","disabled","DEFAULT_DISABLED_HEAD_ACCORDION","colorIcon","DEFAULT_TINT_CHEVRON","initExpand","DEFAULT_EXPANDED_CONTENT_ACCORDION","handleIcon","styleChevron","contentHeight","DEFAULT_HEIGHT_CONTENT","renderContent","otherProperty","onChangeState","styleTouchable","configExpanded","styleContainer","configCollapsed","isStatusFetching","DEFAULT_PROGRESS_LOADING_API","isUnmountedContent","DEFAULT_UNMOUNTED_CONTENT_ACCORDION","activeBackgroundIcon","DEFAULT_ACTIVE_BACKGROUND_CHEVRON","initialMountedContent","DEFAULT_INITIAL_MOUNTED_CONTENT_ACCORDION","handleCustomTouchable","onAnimatedEndExpanded","onAnimatedEndCollapsed","handleContentTouchable","inactiveBackgroundIcon","DEFAULT_INACTIVE_BACKGROUND_CHEVRON","handleIndicatorFetching","layout","onLayout","useLayout","open","useSharedValue","isUnmounted","setUnmountedContent","useState","isMounted","setMounted","handleHeightContent","useMemo","height","DEFAULT_CONTENT_HEIGHT","size","useImperativeHandle","openAccordion","useEffect","runOnUI","value","progress","useDerivedValue","withTiming","created","unmount","style","useAnimatedStyle","opacity","useCallback","undefined","runOnJS","hasLoader","styles","indicator","renderHeader","header","content","contentStyle","container","containerAnimatedStyle"],"sources":["accordion.tsx"],"sourcesContent":["import React, {\n  useCallback,\n  forwardRef,\n  useMemo,\n  useEffect,\n  useState,\n  useImperativeHandle,\n  Ref,\n} from 'react';\nimport {\n  ActivityIndicator,\n  TouchableWithoutFeedback,\n  View,\n  ViewStyle,\n} from 'react-native';\nimport Animated, {\n  useSharedValue,\n  useAnimatedStyle,\n  useDerivedValue,\n  withTiming,\n  runOnUI,\n  runOnJS,\n  AnimatedStyleProp,\n} from 'react-native-reanimated';\nimport Chevron from '../chevron';\nimport type { IAccordionProps } from './types';\nimport { styles } from './styles';\nimport { useLayout, useValidator } from '../hooks';\nimport {\n  DEFAULT_INITIAL_MOUNTED_CONTENT_ACCORDION,\n  DEFAULT_UNMOUNTED_CONTENT_ACCORDION,\n  DEFAULT_INACTIVE_BACKGROUND_CHEVRON,\n  DEFAULT_EXPANDED_CONTENT_ACCORDION,\n  DEFAULT_ACTIVE_BACKGROUND_CHEVRON,\n  DEFAULT_DISABLED_HEAD_ACCORDION,\n  DEFAULT_PROGRESS_LOADING_API,\n  DEFAULT_SIZE_TINT_CHEVRON,\n  DEFAULT_VISIBLE_CHEVRON,\n  DEFAULT_HEIGHT_CONTENT,\n  DEFAULT_TINT_CHEVRON,\n  DEFAULT_CONTENT_HEIGHT,\n} from './constant';\n\nexport default forwardRef((props: IAccordionProps, ref: Ref<any>) => {\n  useValidator(props);\n  //props configuration\n  const {\n    isArrow = DEFAULT_VISIBLE_CHEVRON,\n    sizeIcon = DEFAULT_SIZE_TINT_CHEVRON,\n    disabled = DEFAULT_DISABLED_HEAD_ACCORDION,\n    colorIcon = DEFAULT_TINT_CHEVRON,\n    initExpand = DEFAULT_EXPANDED_CONTENT_ACCORDION,\n    handleIcon,\n    styleChevron,\n    contentHeight = DEFAULT_HEIGHT_CONTENT,\n    renderContent,\n    otherProperty,\n    onChangeState,\n    styleTouchable,\n    configExpanded,\n    styleContainer,\n    configCollapsed,\n    isStatusFetching = DEFAULT_PROGRESS_LOADING_API,\n    isUnmountedContent = DEFAULT_UNMOUNTED_CONTENT_ACCORDION,\n    activeBackgroundIcon = DEFAULT_ACTIVE_BACKGROUND_CHEVRON,\n    initialMountedContent = DEFAULT_INITIAL_MOUNTED_CONTENT_ACCORDION,\n    handleCustomTouchable,\n    onAnimatedEndExpanded,\n    onAnimatedEndCollapsed,\n    handleContentTouchable,\n    inactiveBackgroundIcon = DEFAULT_INACTIVE_BACKGROUND_CHEVRON,\n    handleIndicatorFetching,\n  } = props;\n\n  const [layout, onLayout] = useLayout(0);\n  const open = useSharedValue(initExpand);\n  const [isUnmounted, setUnmountedContent] =\n    useState<boolean>(isUnmountedContent);\n  const [isMounted, setMounted] = useState<boolean>(initialMountedContent);\n\n  const handleHeightContent = useMemo(\n    () =>\n      renderContent === null\n        ? 0\n        : contentHeight || layout.height || DEFAULT_CONTENT_HEIGHT,\n    [contentHeight, layout.height, renderContent]\n  );\n\n  const size = useSharedValue(handleHeightContent);\n\n  useImperativeHandle(ref, () => ({\n    openAccordion,\n  }));\n\n  useEffect(() => {\n    runOnUI(() => {\n      'worklet';\n      if (initExpand && isMounted && handleHeightContent) {\n        size.value = handleHeightContent;\n      }\n    })();\n  }, [handleHeightContent, initExpand, isMounted, size]);\n\n  useEffect(() => {\n    runOnUI(() => {\n      'worklet';\n      if (!isStatusFetching && handleHeightContent) {\n        size.value = handleHeightContent;\n      }\n    })();\n  }, [handleHeightContent, isStatusFetching, size]);\n\n  const progress = useDerivedValue(() =>\n    open.value\n      ? withTiming(1, configExpanded, created)\n      : withTiming(0, configCollapsed, unmount)\n  );\n\n  const style = useAnimatedStyle<AnimatedStyleProp<ViewStyle>>(() => ({\n    height: size.value * progress.value + 1,\n    opacity: progress.value === 0 ? 0 : 1,\n  }));\n\n  const created = useCallback(() => {\n    if (onAnimatedEndExpanded !== undefined) {\n      runOnJS(onAnimatedEndExpanded)();\n    }\n  }, [onAnimatedEndExpanded]);\n\n  const unmount = useCallback(() => {\n    if (onAnimatedEndCollapsed !== undefined) {\n      runOnJS(onAnimatedEndCollapsed)();\n    }\n\n    if (isUnmountedContent) {\n      runOnJS(setUnmountedContent)(true);\n      return;\n    }\n  }, [isUnmountedContent, onAnimatedEndCollapsed]);\n\n  const openAccordion = useCallback(() => {\n    if (size.value === 0) {\n      if (!isMounted) setMounted(true);\n      runOnUI(setUnmountedContent)(false);\n      runOnUI(() => {\n        'worklet';\n        size.value = handleHeightContent;\n      })();\n    }\n    open.value = !open.value;\n    onChangeState && onChangeState(!open.value);\n  }, [handleHeightContent, isMounted, onChangeState, open, size]);\n\n  const hasLoader = useMemo(\n    () =>\n      isStatusFetching ? (\n        handleIndicatorFetching ? (\n          handleIndicatorFetching()\n        ) : (\n          <ActivityIndicator\n            size=\"small\"\n            color=\"#AAAAAA\"\n            style={styles.indicator}\n          />\n        )\n      ) : (\n        <Chevron\n          sizeIcon={sizeIcon}\n          progress={progress}\n          colorIcon={colorIcon}\n          handleIcon={handleIcon}\n          styleChevron={styleChevron}\n          activeBackgroundIcon={activeBackgroundIcon}\n          inactiveBackgroundIcon={inactiveBackgroundIcon}\n        />\n      ),\n    [\n      progress,\n      sizeIcon,\n      colorIcon,\n      handleIcon,\n      styleChevron,\n      isStatusFetching,\n      activeBackgroundIcon,\n      inactiveBackgroundIcon,\n      handleIndicatorFetching,\n    ]\n  );\n\n  const renderHeader = useCallback(() => {\n    if (handleCustomTouchable === null) {\n      return null;\n    }\n    return handleCustomTouchable !== undefined ? (\n      handleCustomTouchable()\n    ) : (\n      <Animated.View style={[styles.header, styleTouchable]}>\n        {handleContentTouchable ? handleContentTouchable() : null}\n        {isArrow ? hasLoader : null}\n      </Animated.View>\n    );\n  }, [\n    isArrow,\n    hasLoader,\n    styleTouchable,\n    handleCustomTouchable,\n    handleContentTouchable,\n  ]);\n\n  const content = useCallback(() => {\n    if (isUnmounted && !open.value) {\n      return null;\n    }\n\n    return isMounted && renderContent ? renderContent() : null;\n  }, [isMounted, isUnmounted, open.value, renderContent]);\n\n  const contentStyle = useMemo<ViewStyle[]>(\n    () => [styles.container, styleContainer],\n    [styleContainer]\n  );\n  const containerAnimatedStyle = useMemo<AnimatedStyleProp<ViewStyle>[]>(\n    () => [styles.content, style],\n    [style]\n  );\n\n  return (\n    <>\n      <TouchableWithoutFeedback\n        onPress={openAccordion}\n        disabled={disabled || isStatusFetching}\n        {...otherProperty}\n      >\n        {renderHeader()}\n      </TouchableWithoutFeedback>\n\n      <Animated.View style={containerAnimatedStyle}>\n        <View onLayout={onLayout} style={contentStyle}>\n          {content()}\n        </View>\n      </Animated.View>\n    </>\n  );\n});\n"],"mappings":"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"}